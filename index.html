<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VeriApp Vault - Secure Insurance Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .card-shadow {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .slide-in {
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .modal-overlay {
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
        }
        
        .modal-content {
            animation: modalSlideIn 0.3s ease-out;
        }
        
        @keyframes modalSlideIn {
            from { transform: translateY(-50px) scale(0.9); opacity: 0; }
            to { transform: translateY(0) scale(1); opacity: 1; }
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            transition: all 0.3s ease;
        }
        
        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(240, 147, 251, 0.3);
        }
        
        .page-transition {
            animation: pageSlideIn 0.4s ease-out;
        }
        
        @keyframes pageSlideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .back-button {
            transition: all 0.3s ease;
        }
        
        .back-button:hover {
            transform: translateX(-3px);
        }
        
        .hidden {
            display: none !important;
        }
        
        .interactive-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .interactive-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Mobile App Container -->
    <div class="max-w-md mx-auto bg-white min-h-screen shadow-2xl relative overflow-hidden">
        
        <!-- Login/Register View -->
        <div id="authView" class="view-container">
            <div class="gradient-bg min-h-screen flex flex-col">
                <!-- Header -->
                <div class="text-center pt-16 pb-8">
                    <div class="w-20 h-20 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-4xl">üîê</span>
                    </div>
                    <h1 class="text-3xl font-bold text-white mb-2">VeriApp Vault</h1>
                    <p class="text-white opacity-90">Your Secure Insurance Platform</p>
                </div>

                <!-- Auth Forms Container -->
                <div class="flex-1 bg-white rounded-t-3xl p-6">
                    <!-- Login Form -->
                    <div id="loginForm" class="space-y-6">
                        <div class="text-center mb-8">
                            <h2 class="text-2xl font-bold text-gray-800 mb-2">Welcome Back</h2>
                            <p class="text-gray-600">Sign in to access your secure vault</p>
                        </div>

                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Email Address</label>
                                <input type="email" id="loginEmail" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Enter your email">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                                <input type="password" id="loginPassword" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Enter your password">
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <label class="flex items-center">
                                    <input type="checkbox" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                    <span class="ml-2 text-sm text-gray-600">Remember me</span>
                                </label>
                                <button class="text-sm text-blue-600 hover:text-blue-700 font-medium">Forgot password?</button>
                            </div>
                        </div>

                        <button onclick="handleLogin()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 px-6 rounded-xl transition-all btn-primary">
                            Sign In
                        </button>

                        <div class="text-center">
                            <span class="text-gray-600">Don't have an account? </span>
                            <button onclick="showRegisterForm()" class="text-blue-600 hover:text-blue-700 font-medium">Sign up</button>
                        </div>
                    </div>

                    <!-- Register Form -->
                    <div id="registerForm" class="space-y-6 hidden">
                        <div class="text-center mb-8">
                            <h2 class="text-2xl font-bold text-gray-800 mb-2">Create Account</h2>
                            <p class="text-gray-600">Join thousands of secure users</p>
                        </div>

                        <!-- Step 1: Personal Details -->
                        <div id="registerStep1" class="space-y-4">
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">First Name</label>
                                    <input type="text" id="firstName" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="John">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Last Name</label>
                                    <input type="text" id="lastName" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Doe">
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ID Number</label>
                                <input type="text" id="idNumber" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="9001015009088">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Email Address</label>
                                <input type="email" id="registerEmail" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="john.doe@email.com">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Phone Number</label>
                                <input type="tel" id="phoneNumber" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="+27 82 123 4567">
                            </div>

                            <button onclick="showRegisterStep2()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 px-6 rounded-xl transition-all btn-primary">
                                Continue
                            </button>
                        </div>

                        <!-- Step 2: Address & Employment -->
                        <div id="registerStep2" class="space-y-4 hidden">
                            <div class="flex items-center justify-between mb-4">
                                <button onclick="showRegisterStep1()" class="back-button flex items-center space-x-2 text-blue-600 hover:text-blue-700">
                                    <span class="text-lg">‚Üê</span>
                                    <span class="text-sm">Back</span>
                                </button>
                                <div class="text-sm text-gray-500">Step 2 of 3</div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Street Address</label>
                                <input type="text" id="streetAddress" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="123 Main Street">
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">City</label>
                                    <input type="text" id="city" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Cape Town">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Postal Code</label>
                                    <input type="text" id="postalCode" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="8001">
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Company Name</label>
                                <input type="text" id="companyName" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Tech Solutions Ltd">
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Job Title</label>
                                    <input type="text" id="jobTitle" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Software Developer">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Monthly Salary</label>
                                    <input type="number" id="monthlySalary" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="45000">
                                </div>
                            </div>

                            <button onclick="showRegisterStep3()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 px-6 rounded-xl transition-all btn-primary">
                                Continue
                            </button>
                        </div>

                        <!-- Step 3: Vehicle & Security -->
                        <div id="registerStep3" class="space-y-4 hidden">
                            <div class="flex items-center justify-between mb-4">
                                <button onclick="showRegisterStep2()" class="back-button flex items-center space-x-2 text-blue-600 hover:text-blue-700">
                                    <span class="text-lg">‚Üê</span>
                                    <span class="text-sm">Back</span>
                                </button>
                                <div class="text-sm text-gray-500">Step 3 of 3</div>
                            </div>

                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Vehicle Make</label>
                                    <select id="vehicleMake" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                                        <option value="">Select Make</option>
                                        <option value="Toyota">Toyota</option>
                                        <option value="BMW">BMW</option>
                                        <option value="Mercedes">Mercedes</option>
                                        <option value="Volkswagen">Volkswagen</option>
                                        <option value="Ford">Ford</option>
                                        <option value="Hyundai">Hyundai</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Vehicle Model</label>
                                    <input type="text" id="vehicleModel" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Corolla">
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Vehicle Year</label>
                                    <input type="number" id="vehicleYear" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="2020" min="1990" max="2024">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">License Plate</label>
                                    <input type="text" id="licensePlate" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="CA 123-456">
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Driver's License Number</label>
                                <input type="text" id="licenseNumber" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="1234567890123">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Create Password</label>
                                <input type="password" id="registerPassword" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Create a strong password">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Confirm Password</label>
                                <input type="password" id="confirmPassword" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Confirm your password">
                            </div>

                            <div class="flex items-start space-x-3">
                                <input type="checkbox" id="agreeTerms" class="mt-1 rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                <label for="agreeTerms" class="text-sm text-gray-600">
                                    I agree to the <button class="text-blue-600 hover:text-blue-700 font-medium">Terms of Service</button> and <button class="text-blue-600 hover:text-blue-700 font-medium">Privacy Policy</button>
                                </label>
                            </div>

                            <button onclick="handleRegister()" class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-4 px-6 rounded-xl transition-all btn-primary">
                                Create Account
                            </button>
                        </div>

                        <div class="text-center">
                            <span class="text-gray-600">Already have an account? </span>
                            <button onclick="showLoginForm()" class="text-blue-600 hover:text-blue-700 font-medium">Sign in</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Main Home View -->
        <div id="homeView" class="view-container hidden">
            <!-- Header -->
            <div class="gradient-bg text-white p-6 pb-8">
                <div class="flex items-center justify-between mb-6">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                            <span class="text-xl">üîê</span>
                        </div>
                        <div>
                            <h1 class="text-xl font-bold">VeriApp Vault</h1>
                            <p class="text-sm opacity-90">Secure Insurance Platform</p>
                        </div>
                    </div>
                    <button onclick="showSettings()" class="w-8 h-8 bg-white bg-opacity-20 rounded-full flex items-center justify-center hover:bg-opacity-30 transition-all">
                        <span class="text-sm">‚öôÔ∏è</span>
                    </button>
                </div>
                
                <!-- Quick Stats -->
                <div class="grid grid-cols-3 gap-4 text-center">
                    <div>
                        <div class="text-2xl font-bold">5</div>
                        <div class="text-xs opacity-90">Active Consents</div>
                    </div>
                    <div>
                        <div class="text-2xl font-bold">12</div>
                        <div class="text-xs opacity-90">Data Fields</div>
                    </div>
                    <div>
                        <div class="text-2xl font-bold">3</div>
                        <div class="text-xs opacity-90">Recent Access</div>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="p-6 space-y-6 pb-24">
                
                <!-- RFQ Section -->
                <div class="card-shadow bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-100 interactive-card">
                    <div class="flex items-center justify-between mb-4">
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800">Get Real Quotes</h3>
                            <p class="text-sm text-gray-600">Send RFQ to all insurers instantly</p>
                        </div>
                        <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                            <span class="text-xl">üí∞</span>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-3 mb-4">
                        <button onclick="showRFQDetails('car')" class="bg-white border border-blue-200 rounded-xl p-3 text-center hover:bg-blue-50 transition-all transform hover:scale-105">
                            <div class="text-2xl mb-1">üöó</div>
                            <div class="text-sm font-medium">Car Insurance</div>
                        </button>
                        <button onclick="showRFQDetails('home')" class="bg-white border border-blue-200 rounded-xl p-3 text-center hover:bg-blue-50 transition-all transform hover:scale-105">
                            <div class="text-2xl mb-1">üè†</div>
                            <div class="text-sm font-medium">Home Insurance</div>
                        </button>
                        <button onclick="showRFQDetails('life')" class="bg-white border border-blue-200 rounded-xl p-3 text-center hover:bg-blue-50 transition-all transform hover:scale-105">
                            <div class="text-2xl mb-1">‚ù§Ô∏è</div>
                            <div class="text-sm font-medium">Life Insurance</div>
                        </button>
                        <button onclick="showRFQDetails('health')" class="bg-white border border-blue-200 rounded-xl p-3 text-center hover:bg-blue-50 transition-all transform hover:scale-105">
                            <div class="text-2xl mb-1">üè•</div>
                            <div class="text-sm font-medium">Health Insurance</div>
                        </button>
                    </div>
                    
                    <button onclick="showView('rfqHistory')" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-xl transition-all btn-primary">
                        View RFQ History
                    </button>
                </div>

                <!-- Generate OTP Section -->
                <div class="card-shadow bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-100 interactive-card">
                    <div class="flex items-center justify-between mb-4">
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800">Generate Access Code</h3>
                            <p class="text-sm text-gray-600">Share your data securely</p>
                        </div>
                        <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                            <span class="text-xl">üîë</span>
                        </div>
                    </div>
                    
                    <div id="otpDisplay" class="hidden bg-white rounded-xl p-4 mb-4 text-center slide-in">
                        <div class="text-3xl font-mono font-bold text-green-600 mb-2" id="otpCode">ABC-123-XYZ</div>
                        <div class="text-sm text-gray-500 mb-3">Valid for <span id="timeRemaining">10:00</span></div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-green-500 h-2 rounded-full transition-all duration-1000" style="width: 100%" id="otpTimer"></div>
                        </div>
                    </div>
                    
                    <button onclick="showOTPModal()" id="generateBtn" class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-4 rounded-xl transition-all btn-primary">
                        Generate One-Time Code
                    </button>
                </div>

                <!-- Quick Actions -->
                <div class="grid grid-cols-2 gap-4">
                    <button onclick="showView('agentRequests')" class="card-shadow bg-white rounded-2xl p-4 text-center hover:bg-gray-50 transition-all interactive-card">
                        <div class="text-2xl mb-2">üí¨</div>
                        <div class="text-sm font-medium text-gray-800">Agent Requests</div>
                        <div class="text-xs text-red-600 font-semibold">2 Pending</div>
                    </button>
                    
                    <button onclick="showView('activeConsents')" class="card-shadow bg-white rounded-2xl p-4 text-center hover:bg-gray-50 transition-all interactive-card">
                        <div class="text-2xl mb-2">üìã</div>
                        <div class="text-sm font-medium text-gray-800">Active Consents</div>
                        <div class="text-xs text-green-600 font-semibold">5 Active</div>
                    </button>
                </div>

                <!-- Recent Activity -->
                <div class="card-shadow bg-white rounded-2xl p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">Recent Activity</h3>
                        <button onclick="showView('activityHistory')" class="text-blue-600 text-sm font-medium hover:text-blue-700">View All</button>
                    </div>
                    
                    <div class="space-y-3">
                        <div class="flex items-start space-x-3 p-3 bg-gray-50 rounded-lg">
                            <div class="w-2 h-2 bg-green-500 rounded-full mt-2"></div>
                            <div class="flex-1">
                                <div class="text-sm font-medium">Quote received from Momentum</div>
                                <div class="text-xs text-gray-500">Car Insurance: R1,250/month ‚Ä¢ 2 hours ago</div>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-3 p-3 bg-gray-50 rounded-lg">
                            <div class="w-2 h-2 bg-blue-500 rounded-full mt-2"></div>
                            <div class="flex-1">
                                <div class="text-sm font-medium">RFQ sent to 8 insurers</div>
                                <div class="text-xs text-gray-500">Car Insurance request ‚Ä¢ 3 hours ago</div>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-3 p-3 bg-gray-50 rounded-lg">
                            <div class="w-2 h-2 bg-yellow-500 rounded-full mt-2"></div>
                            <div class="flex-1">
                                <div class="text-sm font-medium">Agent chat completed</div>
                                <div class="text-xs text-gray-500">Discovery Insure - Policy purchased ‚Ä¢ Yesterday</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Data Vault View -->
        <div id="vaultView" class="view-container hidden">
            <div class="gradient-bg text-white p-6 pb-8">
                <div class="flex items-center justify-between mb-6">
                    <button onclick="showView('home')" class="back-button flex items-center space-x-2 text-white hover:text-blue-200">
                        <span class="text-lg">‚Üê</span>
                        <span class="text-sm">Back</span>
                    </button>
                    <div class="text-center">
                        <h1 class="text-xl font-bold">Data Vault</h1>
                        <p class="text-sm opacity-90">Manage Your Information</p>
                    </div>
                    <button onclick="editVault()" class="text-sm bg-white bg-opacity-20 px-3 py-1 rounded-full hover:bg-opacity-30">Edit</button>
                </div>
            </div>

            <div class="p-6 space-y-6 pb-24 page-transition">
                <!-- Personal Information -->
                <div class="card-shadow bg-white rounded-2xl p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">Personal Information</h3>
                        <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="text-xs text-gray-500 uppercase tracking-wide">Full Name</label>
                                <div class="text-sm font-medium" id="displayFullName">John Doe</div>
                            </div>
                            <div>
                                <label class="text-xs text-gray-500 uppercase tracking-wide">ID Number</label>
                                <div class="text-sm font-medium" id="displayIdNumber">9001015009088</div>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="text-xs text-gray-500 uppercase tracking-wide">Email</label>
                                <div class="text-sm font-medium" id="displayEmail">john.doe@email.com</div>
                            </div>
                            <div>
                                <label class="text-xs text-gray-500 uppercase tracking-wide">Phone</label>
                                <div class="text-sm font-medium" id="displayPhone">+27 82 123 4567</div>
                            </div>
                        </div>
                        
                        <div>
                            <label class="text-xs text-gray-500 uppercase tracking-wide">Address</label>
                            <div class="text-sm font-medium" id="displayAddress">123 Main Street, Cape Town, 8001</div>
                        </div>
                    </div>
                </div>

                <!-- Employment Information -->
                <div class="card-shadow bg-white rounded-2xl p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">Employment Details</h3>
                        <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="text-xs text-gray-500 uppercase tracking-wide">Company</label>
                                <div class="text-sm font-medium" id="displayCompany">Tech Solutions Ltd</div>
                            </div>
                            <div>
                                <label class="text-xs text-gray-500 uppercase tracking-wide">Position</label>
                                <div class="text-sm font-medium" id="displayJobTitle">Software Developer</div>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="text-xs text-gray-500 uppercase tracking-wide">Employment Type</label>
                                <div class="text-sm font-medium">Permanent</div>
                            </div>
                            <div>
                                <label class="text-xs text-gray-500 uppercase tracking-wide">Monthly Salary</label>
                                <div class="text-sm font-medium" id="displaySalary">R45,000</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Vehicle Information -->
                <div class="card-shadow bg-white rounded-2xl p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">Vehicle & License</h3>
                        <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="text-xs text-gray-500 uppercase tracking-wide">Vehicle</label>
                                <div class="text-sm font-medium" id="displayVehicle">2020 Toyota Corolla</div>
                            </div>
                            <div>
                                <label class="text-xs text-gray-500 uppercase tracking-wide">License Plate</label>
                                <div class="text-sm font-medium" id="displayLicensePlate">CA 123-456</div>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="text-xs text-gray-500 uppercase tracking-wide">License Number</label>
                                <div class="text-sm font-medium" id="displayLicenseNumber">1234567890123</div>
                            </div>
                            <div>
                                <label class="text-xs text-gray-500 uppercase tracking-wide">License Expiry</label>
                                <div class="text-sm font-medium text-yellow-600">2024-12-15</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Banking Information -->
                <div class="card-shadow bg-white rounded-2xl p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">Banking Information</h3>
                        <div class="w-3 h-3 bg-gray-400 rounded-full"></div>
                    </div>
                    
                    <div class="text-center py-8">
                        <div class="text-4xl mb-4">üè¶</div>
                        <div class="text-sm text-gray-500 mb-4">Banking information not provided</div>
                        <button onclick="addBankingInfo()" class="bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium py-2 px-4 rounded-lg transition-all btn-primary">
                            Add Banking Details
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- RFQ History View -->
        <div id="rfqHistoryView" class="view-container hidden">
            <div class="gradient-bg text-white p-6 pb-8">
                <div class="flex items-center justify-between mb-6">
                    <button onclick="showView('home')" class="back-button flex items-center space-x-2 text-white hover:text-blue-200">
                        <span class="text-lg">‚Üê</span>
                        <span class="text-sm">Back</span>
                    </button>
                    <div class="text-center">
                        <h1 class="text-xl font-bold">RFQ History</h1>
                        <p class="text-sm opacity-90">Your Quote Requests</p>
                    </div>
                    <button onclick="showRFQDetails('new')" class="text-sm bg-white bg-opacity-20 px-3 py-1 rounded-full hover:bg-opacity-30">New RFQ</button>
                </div>
            </div>

            <div class="p-6 space-y-4 pb-24 page-transition">
                <!-- Active RFQ -->
                <div class="card-shadow bg-blue-50 rounded-2xl p-6 border border-blue-200">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white">
                                <span class="text-lg">üöó</span>
                            </div>
                            <div>
                                <div class="font-semibold text-gray-800">Car Insurance RFQ</div>
                                <div class="text-sm text-gray-600">Sent 3 hours ago</div>
                            </div>
                        </div>
                        <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full font-medium">3 Quotes</span>
                    </div>
                    
                    <div class="text-sm text-gray-600 mb-4">
                        Coverage: R1,000,000 ‚Ä¢ Deductible: R5,000 ‚Ä¢ Sent to 8 insurers
                    </div>
                    
                    <button onclick="viewQuotes('rfq-001')" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-all btn-primary">
                        View Quotes (3)
                    </button>
                </div>

                <!-- Completed RFQ -->
                <div class="card-shadow bg-white rounded-2xl p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-green-600 rounded-full flex items-center justify-center text-white">
                                <span class="text-lg">üè†</span>
                            </div>
                            <div>
                                <div class="font-semibold text-gray-800">Home Insurance RFQ</div>
                                <div class="text-sm text-gray-600">Completed 2 days ago</div>
                            </div>
                        </div>
                        <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full font-medium">Accepted</span>
                    </div>
                    
                    <div class="text-sm text-gray-600 mb-4">
                        Policy purchased from Discovery Insure ‚Ä¢ R850/month
                    </div>
                    
                    <button onclick="viewPolicyDetails('policy-001')" class="w-full bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-2 px-4 rounded-lg transition-all">
                        View Policy Details
                    </button>
                </div>

                <!-- Expired RFQ -->
                <div class="card-shadow bg-gray-50 rounded-2xl p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-gray-400 rounded-full flex items-center justify-center text-white">
                                <span class="text-lg">‚ù§Ô∏è</span>
                            </div>
                            <div>
                                <div class="font-semibold text-gray-800">Life Insurance RFQ</div>
                                <div class="text-sm text-gray-600">Expired 1 week ago</div>
                            </div>
                        </div>
                        <span class="bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full font-medium">Expired</span>
                    </div>
                    
                    <div class="text-sm text-gray-600 mb-4">
                        No quotes received ‚Ä¢ 5 insurers contacted
                    </div>
                    
                    <button onclick="resendRFQ('rfq-003')" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-medium py-2 px-4 rounded-lg transition-all btn-secondary">
                        Resend RFQ
                    </button>
                </div>
            </div>
        </div>

        <!-- Agent Requests View -->
        <div id="agentRequestsView" class="view-container hidden">
            <div class="gradient-bg text-white p-6 pb-8">
                <div class="flex items-center justify-between mb-6">
                    <button onclick="showView('home')" class="back-button flex items-center space-x-2 text-white hover:text-blue-200">
                        <span class="text-lg">‚Üê</span>
                        <span class="text-sm">Back</span>
                    </button>
                    <div class="text-center">
                        <h1 class="text-xl font-bold">Agent Requests</h1>
                        <p class="text-sm opacity-90">Communication Requests</p>
                    </div>
                    <span class="text-sm bg-red-500 px-2 py-1 rounded-full">2 New</span>
                </div>
            </div>

            <div class="p-6 space-y-4 pb-24 page-transition">
                <!-- New Agent Request -->
                <div class="card-shadow border border-blue-200 rounded-2xl p-6 bg-blue-50">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-bold">DI</div>
                            <div>
                                <div class="font-semibold text-gray-800">Discovery Insure</div>
                                <div class="text-sm text-gray-600">Agent: Sarah M. ‚Ä¢ Verified ‚úì</div>
                            </div>
                        </div>
                        <div class="text-xs text-gray-500">2 min ago</div>
                    </div>
                    
                    <div class="bg-white rounded-lg p-4 mb-4">
                        <div class="text-sm text-gray-700 mb-2">
                            "Hi John! I have a competitive car insurance quote for you based on your recent RFQ. Our rates are 15% lower than market average. Can we schedule a quick chat to discuss your coverage options?"
                        </div>
                        <div class="text-xs text-gray-500">
                            Estimated savings: R180/month ‚Ä¢ Response time: &lt;2 hours
                        </div>
                    </div>
                    
                    <div class="flex space-x-3">
                        <button onclick="acceptAgentRequest('discovery-sarah')" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium py-3 px-4 rounded-lg transition-all btn-primary">
                            Accept & Chat
                        </button>
                        <button onclick="declineAgentRequest('discovery-sarah')" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm font-medium py-3 px-4 rounded-lg transition-all">
                            Decline
                        </button>
                    </div>
                </div>

                <!-- Another Agent Request -->
                <div class="card-shadow border border-green-200 rounded-2xl p-6 bg-green-50">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 bg-green-600 rounded-full flex items-center justify-center text-white text-sm font-bold">OM</div>
                            <div>
                                <div class="font-semibold text-gray-800">Old Mutual</div>
                                <div class="text-sm text-gray-600">Agent: Thabo K. ‚Ä¢ Verified ‚úì</div>
                            </div>
                        </div>
                        <div class="text-xs text-gray-500">5 min ago</div>
                    </div>
                    
                    <div class="bg-white rounded-lg p-4 mb-4">
                        <div class="text-sm text-gray-700 mb-2">
                            "Following up on your life insurance RFQ. I have a comprehensive package that includes funeral cover and investment benefits. Let's discuss how we can secure your family's future."
                        </div>
                        <div class="text-xs text-gray-500">
                            Package includes: Life cover + Funeral + Investment ‚Ä¢ Free consultation
                        </div>
                    </div>
                    
                    <div class="flex space-x-3">
                        <button onclick="acceptAgentRequest('oldmutual-thabo')" class="flex-1 bg-green-600 hover:bg-green-700 text-white text-sm font-medium py-3 px-4 rounded-lg transition-all btn-primary">
                            Accept & Chat
                        </button>
                        <button onclick="declineAgentRequest('oldmutual-thabo')" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm font-medium py-3 px-4 rounded-lg transition-all">
                            Decline
                        </button>
                    </div>
                </div>

                <!-- Previous Conversations -->
                <div class="card-shadow bg-white rounded-2xl p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Previous Conversations</h3>
                    
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center text-white text-xs font-bold">MI</div>
                                <div>
                                    <div class="font-medium text-sm">Momentum Insurance</div>
                                    <div class="text-xs text-gray-500">Chat completed ‚Ä¢ Policy purchased</div>
                                </div>
                            </div>
                            <button onclick="viewChatHistory('momentum-chat')" class="text-blue-600 text-xs font-medium hover:text-blue-700">View</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings View -->
        <div id="settingsView" class="view-container hidden">
            <div class="gradient-bg text-white p-6 pb-8">
                <div class="flex items-center justify-between mb-6">
                    <button onclick="showView('home')" class="back-button flex items-center space-x-2 text-white hover:text-blue-200">
                        <span class="text-lg">‚Üê</span>
                        <span class="text-sm">Back</span>
                    </button>
                    <div class="text-center">
                        <h1 class="text-xl font-bold">Settings</h1>
                        <p class="text-sm opacity-90">Account & Preferences</p>
                    </div>
                    <div class="w-8"></div>
                </div>
            </div>

            <div class="p-6 space-y-6 pb-24 page-transition">
                <!-- Account Section -->
                <div class="card-shadow bg-white rounded-2xl p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Account</h3>
                    
                    <div class="space-y-3">
                        <button onclick="editProfile()" class="w-full flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-all interactive-card">
                            <div class="flex items-center space-x-3">
                                <span class="text-lg">üë§</span>
                                <div class="text-left">
                                    <div class="font-medium text-sm">Edit Profile</div>
                                    <div class="text-xs text-gray-500">Update personal information</div>
                                </div>
                            </div>
                            <span class="text-gray-400">‚Üí</span>
                        </button>
                        
                        <button onclick="changePassword()" class="w-full flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-all interactive-card">
                            <div class="flex items-center space-x-3">
                                <span class="text-lg">üîí</span>
                                <div class="text-left">
                                    <div class="font-medium text-sm">Change Password</div>
                                    <div class="text-xs text-gray-500">Update your password</div>
                                </div>
                            </div>
                            <span class="text-gray-400">‚Üí</span>
                        </button>
                        
                        <button onclick="showView('vault')" class="w-full flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-all interactive-card">
                            <div class="flex items-center space-x-3">
                                <span class="text-lg">üîê</span>
                                <div class="text-left">
                                    <div class="font-medium text-sm">Data Vault</div>
                                    <div class="text-xs text-gray-500">Manage your secure data</div>
                                </div>
                            </div>
                            <span class="text-gray-400">‚Üí</span>
                        </button>
                    </div>
                </div>

                <!-- Privacy & Security -->
                <div class="card-shadow bg-white rounded-2xl p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Privacy & Security</h3>
                    
                    <div class="space-y-3">
                        <button onclick="showPrivacySettings()" class="w-full flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-all interactive-card">
                            <div class="flex items-center space-x-3">
                                <span class="text-lg">üõ°Ô∏è</span>
                                <div class="text-left">
                                    <div class="font-medium text-sm">Privacy Settings</div>
                                    <div class="text-xs text-gray-500">Control data sharing</div>
                                </div>
                            </div>
                            <span class="text-gray-400">‚Üí</span>
                        </button>
                        
                        <button onclick="showConsentHistory()" class="w-full flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-all interactive-card">
                            <div class="flex items-center space-x-3">
                                <span class="text-lg">üìã</span>
                                <div class="text-left">
                                    <div class="font-medium text-sm">Consent History</div>
                                    <div class="text-xs text-gray-500">View data access logs</div>
                                </div>
                            </div>
                            <span class="text-gray-400">‚Üí</span>
                        </button>
                        
                        <div class="w-full flex items-center justify-between p-4 bg-gray-50 rounded-xl">
                            <div class="flex items-center space-x-3">
                                <span class="text-lg">üîî</span>
                                <div class="text-left">
                                    <div class="font-medium text-sm">Push Notifications</div>
                                    <div class="text-xs text-gray-500">Quote alerts & updates</div>
                                </div>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" checked class="sr-only peer">
                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Support -->
                <div class="card-shadow bg-white rounded-2xl p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Support</h3>
                    
                    <div class="space-y-3">
                        <button onclick="showHelp()" class="w-full flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-all interactive-card">
                            <div class="flex items-center space-x-3">
                                <span class="text-lg">‚ùì</span>
                                <div class="text-left">
                                    <div class="font-medium text-sm">Help & FAQ</div>
                                    <div class="text-xs text-gray-500">Get answers to common questions</div>
                                </div>
                            </div>
                            <span class="text-gray-400">‚Üí</span>
                        </button>
                        
                        <button onclick="contactSupport()" class="w-full flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-all interactive-card">
                            <div class="flex items-center space-x-3">
                                <span class="text-lg">üí¨</span>
                                <div class="text-left">
                                    <div class="font-medium text-sm">Contact Support</div>
                                    <div class="text-xs text-gray-500">Chat with our team</div>
                                </div>
                            </div>
                            <span class="text-gray-400">‚Üí</span>
                        </button>
                        
                        <button onclick="showAbout()" class="w-full flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-all interactive-card">
                            <div class="flex items-center space-x-3">
                                <span class="text-lg">‚ÑπÔ∏è</span>
                                <div class="text-left">
                                    <div class="font-medium text-sm">About VeriApp</div>
                                    <div class="text-xs text-gray-500">Version 2.1.0</div>
                                </div>
                            </div>
                            <span class="text-gray-400">‚Üí</span>
                        </button>
                    </div>
                </div>

                <!-- Sign Out -->
                <div class="card-shadow bg-white rounded-2xl p-6">
                    <button onclick="handleLogout()" class="w-full flex items-center justify-center space-x-3 p-4 bg-red-50 text-red-600 rounded-xl hover:bg-red-100 transition-all interactive-card">
                        <span class="text-lg">üö™</span>
                        <span class="font-medium">Sign Out</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Analytics Dashboard (Insurer View) -->
        <div id="analyticsView" class="view-container hidden">
            <div class="bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 pb-8">
                <div class="flex items-center justify-between mb-6">
                    <button onclick="showView('home')" class="back-button flex items-center space-x-2 text-white hover:text-purple-200">
                        <span class="text-lg">‚Üê</span>
                        <span class="text-sm">Back</span>
                    </button>
                    <div class="text-center">
                        <h1 class="text-xl font-bold">Analytics Dashboard</h1>
                        <p class="text-sm opacity-90">Discovery Insure Portal</p>
                    </div>
                    <button onclick="switchCompany()" class="text-xs bg-white bg-opacity-20 px-3 py-1 rounded-full hover:bg-opacity-30">Switch Company</button>
                </div>
                
                <!-- Key Metrics -->
                <div class="grid grid-cols-2 gap-4 text-center">
                    <div>
                        <div class="text-2xl font-bold">1,247</div>
                        <div class="text-xs opacity-90">New Customers</div>
                    </div>
                    <div>
                        <div class="text-2xl font-bold">R2.4M</div>
                        <div class="text-xs opacity-90">Revenue (MTD)</div>
                    </div>
                </div>
            </div>

            <div class="p-6 space-y-6 pb-24 page-transition">
                
                <!-- Performance Overview -->
                <div class="card-shadow bg-white rounded-2xl p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Performance Overview</h3>
                    
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div class="bg-green-50 rounded-xl p-4 text-center interactive-card">
                            <div class="text-2xl font-bold text-green-600">847</div>
                            <div class="text-sm text-gray-600">RFQs Received</div>
                            <div class="text-xs text-green-600">+12% vs last month</div>
                        </div>
                        <div class="bg-blue-50 rounded-xl p-4 text-center interactive-card">
                            <div class="text-2xl font-bold text-blue-600">34%</div>
                            <div class="text-sm text-gray-600">Conversion Rate</div>
                            <div class="text-xs text-blue-600">+5% vs last month</div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-purple-50 rounded-xl p-4 text-center interactive-card">
                            <div class="text-2xl font-bold text-purple-600">8.5min</div>
                            <div class="text-sm text-gray-600">Avg. Onboarding</div>
                            <div class="text-xs text-purple-600">-15min vs traditional</div>
                        </div>
                        <div class="bg-orange-50 rounded-xl p-4 text-center interactive-card">
                            <div class="text-2xl font-bold text-orange-600">4.8/5</div>
                            <div class="text-sm text-gray-600">Customer Rating</div>
                            <div class="text-xs text-orange-600">+0.3 vs last month</div>
                        </div>
                    </div>
                </div>

                <!-- Agent Performance -->
                <div class="card-shadow bg-white rounded-2xl p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">Top Performing Agents</h3>
                        <button onclick="viewAllAgents()" class="text-blue-600 text-sm font-medium hover:text-blue-700">View All</button>
                    </div>
                    
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-3 bg-yellow-50 rounded-lg border border-yellow-200 interactive-card">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center text-white text-xs font-bold">1</div>
                                <div>
                                    <div class="font-medium text-sm">Sarah M.</div>
                                    <div class="text-xs text-gray-500">47 conversions ‚Ä¢ 6.2min avg</div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-sm font-bold text-green-600">R284K</div>
                                <div class="text-xs text-gray-500">Revenue</div>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg interactive-card">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-gray-400 rounded-full flex items-center justify-center text-white text-xs font-bold">2</div>
                                <div>
                                    <div class="font-medium text-sm">Thabo K.</div>
                                    <div class="text-xs text-gray-500">39 conversions ‚Ä¢ 7.1min avg</div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-sm font-bold text-green-600">R231K</div>
                                <div class="text-xs text-gray-500">Revenue</div>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg interactive-card">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-orange-400 rounded-full flex items-center justify-center text-white text-xs font-bold">3</div>
                                <div>
                                    <div class="font-medium text-sm">Lisa P.</div>
                                    <div class="text-xs text-gray-500">35 conversions ‚Ä¢ 8.4min avg</div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-sm font-bold text-green-600">R198K</div>
                                <div class="text-xs text-gray-500">Revenue</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- RFQ Analytics -->
                <div class="card-shadow bg-white rounded-2xl p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">RFQ Breakdown</h3>
                    
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg interactive-card">
                            <div class="flex items-center space-x-3">
                                <span class="text-lg">üöó</span>
                                <span class="text-sm font-medium">Car Insurance</span>
                            </div>
                            <div class="text-right">
                                <div class="text-sm font-bold">423 RFQs</div>
                                <div class="text-xs text-green-600">38% conversion</div>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg interactive-card">
                            <div class="flex items-center space-x-3">
                                <span class="text-lg">üè†</span>
                                <span class="text-sm font-medium">Home Insurance</span>
                            </div>
                            <div class="text-right">
                                <div class="text-sm font-bold">234 RFQs</div>
                                <div class="text-xs text-green-600">42% conversion</div>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 bg-purple-50 rounded-lg interactive-card">
                            <div class="flex items-center space-x-3">
                                <span class="text-lg">‚ù§Ô∏è</span>
                                <span class="text-sm font-medium">Life Insurance</span>
                            </div>
                            <div class="text-right">
                                <div class="text-sm font-bold">190 RFQs</div>
                                <div class="text-xs text-green-600">28% conversion</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="fixed bottom-0 left-1/2 transform -translate-x-1/2 w-full max-w-md bg-white border-t border-gray-200 shadow-lg">
            <div class="flex justify-around py-3">
                <button onclick="showView('home')" id="homeTab" class="flex flex-col items-center space-y-1 text-blue-600 transition-all">
                    <span class="text-lg">üè†</span>
                    <span class="text-xs font-medium">Home</span>
                </button>
                <button onclick="showView('vault')" id="vaultTab" class="flex flex-col items-center space-y-1 text-gray-400 hover:text-blue-600 transition-all">
                    <span class="text-lg">üîê</span>
                    <span class="text-xs">Vault</span>
                </button>
                <button onclick="showView('analytics')" id="analyticsTab" class="flex flex-col items-center space-y-1 text-gray-400 hover:text-blue-600 transition-all">
                    <span class="text-lg">üìä</span>
                    <span class="text-xs">Analytics</span>
                </button>
                <button onclick="showView('settings')" id="settingsTab" class="flex flex-col items-center space-y-1 text-gray-400 hover:text-blue-600 transition-all">
                    <span class="text-lg">‚öôÔ∏è</span>
                    <span class="text-xs">Settings</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Enhanced Modal System -->
    <div id="modalOverlay" class="hidden fixed inset-0 modal-overlay flex items-center justify-center z-50">
        <div class="bg-white rounded-2xl p-6 m-4 max-w-sm w-full modal-content">
            <div id="modalContent">
                <!-- Modal content will be inserted here -->
            </div>
        </div>
    </div>

    <script>
        let otpTimer;
        let timeLeft = 600; // 10 minutes in seconds
        let currentView = 'auth';
        let navigationHistory = [];
        let userData = {};

        // Enhanced view management
        function showView(viewName) {
            // Hide all views
            document.querySelectorAll('.view-container').forEach(view => {
                view.classList.add('hidden');
            });
            
            // Show selected view
            const targetView = document.getElementById(viewName + 'View');
            if (targetView) {
                targetView.classList.remove('hidden');
                targetView.classList.add('page-transition');
                
                // Add to navigation history
                if (currentView !== viewName) {
                    navigationHistory.push(currentView);
                }
                currentView = viewName;
                
                // Update tab states
                updateTabStates(viewName);
                
                // Remove animation class after animation completes
                setTimeout(() => {
                    targetView.classList.remove('page-transition');
                }, 400);
            }
        }

        function updateTabStates(activeView) {
            document.querySelectorAll('[id$="Tab"]').forEach(tab => {
                tab.className = tab.className.replace('text-blue-600', 'text-gray-400');
            });
            
            const activeTab = document.getElementById(activeView + 'Tab');
            if (activeTab) {
                activeTab.className = activeTab.className.replace('text-gray-400', 'text-blue-600');
            }
        }

        // Enhanced modal system
        function showModal(title, content, buttons = []) {
            const modalContent = document.getElementById('modalContent');
            
            let buttonHTML = '';
            if (buttons.length === 0) {
                buttonHTML = `
                    <button onclick="closeModal()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-xl transition-all btn-primary">
                        OK
                    </button>
                `;
            } else {
                buttonHTML = buttons.map(btn => `
                    <button onclick="${btn.action}" class="${btn.class} font-semibold py-3 px-4 rounded-xl transition-all ${btn.primary ? 'btn-primary' : ''}">
                        ${btn.text}
                    </button>
                `).join('');
            }
            
            modalContent.innerHTML = `
                <div class="text-center">
                    <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-2xl">${title.icon || 'üí¨'}</span>
                    </div>
                    <h3 class="text-lg font-semibold mb-2">${title.text}</h3>
                    <div class="text-sm text-gray-600 mb-6">${content}</div>
                    <div class="space-y-3">
                        ${buttonHTML}
                    </div>
                </div>
            `;
            
            document.getElementById('modalOverlay').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('modalOverlay').classList.add('hidden');
        }

        // Enhanced OTP functionality
        function showOTPModal() {
            showModal(
                { text: 'Generate Access Code', icon: 'üîë' },
                'This will create a secure one-time code that expires in 10 minutes. Share this code only with trusted insurance agents.',
                [
                    {
                        text: 'Cancel',
                        action: 'closeModal()',
                        class: 'w-full bg-gray-200 hover:bg-gray-300 text-gray-700'
                    },
                    {
                        text: 'Generate Code',
                        action: 'generateOTP(); closeModal();',
                        class: 'w-full bg-green-600 hover:bg-green-700 text-white',
                        primary: true
                    }
                ]
            );
        }

        function generateOTP() {
            // Generate random OTP
            const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const numbers = '0123456789';
            
            const part1 = Array.from({length: 3}, () => letters[Math.floor(Math.random() * letters.length)]).join('');
            const part2 = Array.from({length: 3}, () => numbers[Math.floor(Math.random() * numbers.length)]).join('');
            const part3 = Array.from({length: 3}, () => letters[Math.floor(Math.random() * letters.length)]).join('');
            
            const otp = `${part1}-${part2}-${part3}`;
            
            document.getElementById('otpCode').textContent = otp;
            document.getElementById('otpDisplay').classList.remove('hidden');
            document.getElementById('generateBtn').textContent = 'Generate New Code';
            
            // Start countdown timer
            timeLeft = 600;
            startTimer();
            
            showNotification('‚úÖ One-time access code generated successfully!', 'success');
        }

        function startTimer() {
            const timerBar = document.getElementById('otpTimer');
            const timeDisplay = document.getElementById('timeRemaining');
            
            otpTimer = setInterval(() => {
                timeLeft--;
                const percentage = (timeLeft / 600) * 100;
                timerBar.style.width = percentage + '%';
                
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timeDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 0) {
                    clearInterval(otpTimer);
                    document.getElementById('otpDisplay').classList.add('hidden');
                    document.getElementById('generateBtn').textContent = 'Generate One-Time Code';
                    showNotification('‚è∞ Access code has expired', 'warning');
                }
            }, 1000);
        }

        // Enhanced RFQ functionality
        function showRFQDetails(type) {
            const insuranceTypes = {
                'car': { name: 'Car Insurance', icon: 'üöó', desc: 'Comprehensive vehicle coverage' },
                'home': { name: 'Home Insurance', icon: 'üè†', desc: 'Property and contents protection' },
                'life': { name: 'Life Insurance', icon: '‚ù§Ô∏è', desc: 'Life and funeral cover' },
                'health': { name: 'Health Insurance', icon: 'üè•', desc: 'Medical aid and gap cover' },
                'new': { name: 'New RFQ', icon: '‚ûï', desc: 'Create a new quote request' }
            };
            
            const insurance = insuranceTypes[type];
            
            showModal(
                { text: `Send ${insurance.name} RFQ`, icon: insurance.icon },
                `${insurance.desc}\n\nThis will send your request to 8+ verified insurers. You'll receive real quotes (not estimates) within 2-24 hours.`,
                [
                    {
                        text: 'Cancel',
                        action: 'closeModal()',
                        class: 'flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700'
                    },
                    {
                        text: 'Send RFQ',
                        action: `sendRFQ('${type}'); closeModal();`,
                        class: 'flex-1 bg-blue-600 hover:bg-blue-700 text-white',
                        primary: true
                    }
                ]
            );
        }

        function sendRFQ(type) {
            showNotification('üì§ Sending RFQ to insurers...', 'info');
            
            // Simulate API call
            setTimeout(() => {
                showNotification(`‚úÖ RFQ sent to 8 insurers for ${type} insurance!`, 'success');
                
                // Simulate quotes arriving
                setTimeout(() => {
                    showQuotes(type);
                }, 3000);
            }, 1500);
        }

        function showQuotes(type) {
            const quotes = [
                { company: 'Discovery', logo: 'DI', price: 'R1,250', color: 'blue', rating: 4.8 },
                { company: 'Momentum', logo: 'MI', price: 'R1,180', color: 'green', rating: 4.6 },
                { company: 'Old Mutual', logo: 'OM', price: 'R1,320', color: 'purple', rating: 4.7 }
            ];
            
            showNotification('üí∞ 3 new quotes received!', 'success');
            
            // Show quotes in a modal
            const quotesHTML = quotes.map(quote => `
                <div class="border border-${quote.color}-200 rounded-lg p-3 bg-${quote.color}-50 mb-3">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center space-x-2">
                            <div class="w-6 h-6 bg-${quote.color}-600 rounded-full flex items-center justify-center text-white text-xs font-bold">${quote.logo}</div>
                            <div class="font-medium text-sm">${quote.company}</div>
                            <div class="text-xs text-yellow-500">‚òÖ${quote.rating}</div>
                        </div>
                        <div class="text-lg font-bold text-${quote.color}-600">${quote.price}/mo</div>
                    </div>
                    <button onclick="acceptQuote('${quote.company}'); closeModal();" class="w-full bg-${quote.color}-600 hover:bg-${quote.color}-700 text-white text-xs font-medium py-2 px-3 rounded-lg transition-all">
                        Accept Quote
                    </button>
                </div>
            `).join('');
            
            showModal(
                { text: 'Quotes Received', icon: 'üí∞' },
                quotesHTML,
                [
                    {
                        text: 'View All Details',
                        action: 'showView("rfqHistory"); closeModal();',
                        class: 'w-full bg-blue-600 hover:bg-blue-700 text-white',
                        primary: true
                    }
                ]
            );
        }

        function acceptQuote(company) {
            showNotification(`‚úÖ Quote accepted from ${company}! Agent will contact you.`, 'success');
        }

        // Agent request functionality
        function acceptAgentRequest(agentId) {
            showModal(
                { text: 'Accept Agent Request', icon: 'üí¨' },
                'This will start a secure chat session with the verified agent. You can end the conversation at any time.',
                [
                    {
                        text: 'Cancel',
                        action: 'closeModal()',
                        class: 'flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700'
                    },
                    {
                        text: 'Start Chat',
                        action: `startAgentChat('${agentId}'); closeModal();`,
                        class: 'flex-1 bg-green-600 hover:bg-green-700 text-white',
                        primary: true
                    }
                ]
            );
        }

        function declineAgentRequest(agentId) {
            showModal(
                { text: 'Decline Agent Request', icon: '‚ùå' },
                'Are you sure you want to decline this agent request? You can always contact them later through your RFQ history.',
                [
                    {
                        text: 'Cancel',
                        action: 'closeModal()',
                        class: 'flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700'
                    },
                    {
                        text: 'Decline',
                        action: `confirmDeclineAgent('${agentId}'); closeModal();`,
                        class: 'flex-1 bg-red-600 hover:bg-red-700 text-white'
                    }
                ]
            );
        }

        function startAgentChat(agentId) {
            showNotification('üí¨ Chat started! Agent will respond shortly.', 'success');
        }

        function confirmDeclineAgent(agentId) {
            showNotification('‚ùå Agent request declined.', 'warning');
        }

        // Vault functionality
        function editVault() {
            showModal(
                { text: 'Edit Data Vault', icon: '‚úèÔ∏è' },
                'This will open the secure data editor. All changes are encrypted and logged for your security.',
                [
                    {
                        text: 'Cancel',
                        action: 'closeModal()',
                        class: 'flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700'
                    },
                    {
                        text: 'Open Editor',
                        action: 'openDataEditor(); closeModal();',
                        class: 'flex-1 bg-blue-600 hover:bg-blue-700 text-white',
                        primary: true
                    }
                ]
            );
        }

        function openDataEditor() {
            showNotification('‚úèÔ∏è Data editor opened. Make your changes securely.', 'info');
        }

        function addBankingInfo() {
            showModal(
                { text: 'Add Banking Information', icon: 'üè¶' },
                'Your banking details will be encrypted with military-grade security. This information helps insurers provide more accurate quotes.',
                [
                    {
                        text: 'Cancel',
                        action: 'closeModal()',
                        class: 'flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700'
                    },
                    {
                        text: 'Add Details',
                        action: 'openBankingForm(); closeModal();',
                        class: 'flex-1 bg-green-600 hover:bg-green-700 text-white',
                        primary: true
                    }
                ]
            );
        }

        function openBankingForm() {
            showNotification('üè¶ Banking form opened. Your data is secure.', 'info');
        }

        // Additional functionality
        function viewQuotes(rfqId) {
            showNotification('üìä Loading quote comparison...', 'info');
            setTimeout(() => {
                showView('rfqHistory');
            }, 1000);
        }

        function resendRFQ(rfqId) {
            showModal(
                { text: 'Resend RFQ', icon: 'üîÑ' },
                'This will send your request to additional insurers and refresh expired quotes.',
                [
                    {
                        text: 'Cancel',
                        action: 'closeModal()',
                        class: 'flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700'
                    },
                    {
                        text: 'Resend',
                        action: 'confirmResendRFQ(); closeModal();',
                        class: 'flex-1 bg-purple-600 hover:bg-purple-700 text-white',
                        primary: true
                    }
                ]
            );
        }

        function confirmResendRFQ() {
            showNotification('üîÑ RFQ resent to 12 insurers!', 'success');
        }

        function showSettings() {
            showModal(
                { text: 'Account Settings', icon: '‚öôÔ∏è' },
                'Manage your VeriApp Vault account and preferences.',
                [
                    {
                        text: 'Edit Profile',
                        action: 'editProfile(); closeModal();',
                        class: 'w-full bg-blue-600 hover:bg-blue-700 text-white mb-2',
                        primary: true
                    },
                    {
                        text: 'Privacy Settings',
                        action: 'showPrivacySettings(); closeModal();',
                        class: 'w-full bg-gray-200 hover:bg-gray-300 text-gray-700 mb-2'
                    },
                    {
                        text: 'Sign Out',
                        action: 'handleLogout(); closeModal();',
                        class: 'w-full bg-red-600 hover:bg-red-700 text-white mb-2'
                    },
                    {
                        text: 'Cancel',
                        action: 'closeModal()',
                        class: 'w-full bg-gray-200 hover:bg-gray-300 text-gray-700'
                    }
                ]
            );
        }

        function handleLogout() {
            showModal(
                { text: 'Sign Out', icon: 'üö™' },
                'Are you sure you want to sign out? You\'ll need to sign in again to access your vault.',
                [
                    {
                        text: 'Cancel',
                        action: 'closeModal()',
                        class: 'flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700'
                    },
                    {
                        text: 'Sign Out',
                        action: 'confirmLogout(); closeModal();',
                        class: 'flex-1 bg-red-600 hover:bg-red-700 text-white'
                    }
                ]
            );
        }

        function confirmLogout() {
            // Clear user data
            localStorage.removeItem('veriapp_user');
            userData = {};
            
            // Reset forms
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';
            
            // Show auth view
            showView('auth');
            showNotification('üëã You have been signed out successfully.', 'success');
        }

        function editProfile() {
            showNotification('‚úèÔ∏è Profile editor coming soon!', 'info');
        }

        function showPrivacySettings() {
            showNotification('üîí Privacy settings coming soon!', 'info');
        }

        function changePassword() {
            showModal(
                { text: 'Change Password', icon: 'üîí' },
                'Update your account password for enhanced security.',
                [
                    {
                        text: 'Cancel',
                        action: 'closeModal()',
                        class: 'flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700'
                    },
                    {
                        text: 'Update Password',
                        action: 'openPasswordForm(); closeModal();',
                        class: 'flex-1 bg-blue-600 hover:bg-blue-700 text-white',
                        primary: true
                    }
                ]
            );
        }

        function openPasswordForm() {
            showNotification('üîí Password update form coming soon!', 'info');
        }

        function showConsentHistory() {
            showModal(
                { text: 'Consent History', icon: 'üìã' },
                'View all data access permissions and their usage history.',
                [
                    {
                        text: 'View History',
                        action: 'openConsentHistory(); closeModal();',
                        class: 'w-full bg-blue-600 hover:bg-blue-700 text-white',
                        primary: true
                    }
                ]
            );
        }

        function openConsentHistory() {
            showNotification('üìã Consent history viewer coming soon!', 'info');
        }

        function showHelp() {
            showModal(
                { text: 'Help & FAQ', icon: '‚ùì' },
                'Get answers to frequently asked questions about VeriApp Vault.',
                [
                    {
                        text: 'View FAQ',
                        action: 'openFAQ(); closeModal();',
                        class: 'w-full bg-blue-600 hover:bg-blue-700 text-white',
                        primary: true
                    }
                ]
            );
        }

        function openFAQ() {
            showNotification('‚ùì FAQ section coming soon!', 'info');
        }

        function contactSupport() {
            showModal(
                { text: 'Contact Support', icon: 'üí¨' },
                'Get help from our support team. We typically respond within 2 hours.',
                [
                    {
                        text: 'Start Chat',
                        action: 'startSupportChat(); closeModal();',
                        class: 'w-full bg-green-600 hover:bg-green-700 text-white',
                        primary: true
                    }
                ]
            );
        }

        function startSupportChat() {
            showNotification('üí¨ Support chat coming soon!', 'info');
        }

        function showAbout() {
            showModal(
                { text: 'About VeriApp Vault', icon: '‚ÑπÔ∏è' },
                'VeriApp Vault v2.1.0\n\nSecure insurance platform that puts you in control of your data. Built with privacy-first principles and military-grade encryption.\n\n¬© 2024 VeriApp Technologies',
                [
                    {
                        text: 'OK',
                        action: 'closeModal()',
                        class: 'w-full bg-blue-600 hover:bg-blue-700 text-white',
                        primary: true
                    }
                ]
            );
        }

        function switchCompany() {
            showNotification('üîÑ Company switcher coming soon!', 'info');
        }

        function viewAllAgents() {
            showNotification('üë• Agent directory coming soon!', 'info');
        }

        // Enhanced notification system
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 left-1/2 transform -translate-x-1/2 px-4 py-3 rounded-lg text-white text-sm font-medium z-50 slide-in shadow-lg ${
                type === 'success' ? 'bg-green-600' : 
                type === 'warning' ? 'bg-yellow-600' : 
                type === 'error' ? 'bg-red-600' :
                'bg-blue-600'
            }`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translate(-50%, -20px)';
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 3000);
        }

        // Authentication Functions
        function showLoginForm() {
            document.getElementById('loginForm').classList.remove('hidden');
            document.getElementById('registerForm').classList.add('hidden');
        }

        function showRegisterForm() {
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('registerForm').classList.remove('hidden');
            showRegisterStep1();
        }

        function showRegisterStep1() {
            document.getElementById('registerStep1').classList.remove('hidden');
            document.getElementById('registerStep2').classList.add('hidden');
            document.getElementById('registerStep3').classList.add('hidden');
        }

        function showRegisterStep2() {
            // Validate step 1
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const idNumber = document.getElementById('idNumber').value;
            const email = document.getElementById('registerEmail').value;
            const phone = document.getElementById('phoneNumber').value;

            if (!firstName || !lastName || !idNumber || !email || !phone) {
                showNotification('‚ùå Please fill in all required fields', 'error');
                return;
            }

            if (idNumber.length !== 13) {
                showNotification('‚ùå ID number must be 13 digits', 'error');
                return;
            }

            document.getElementById('registerStep1').classList.add('hidden');
            document.getElementById('registerStep2').classList.remove('hidden');
            document.getElementById('registerStep3').classList.add('hidden');
        }

        function showRegisterStep3() {
            // Validate step 2
            const streetAddress = document.getElementById('streetAddress').value;
            const city = document.getElementById('city').value;
            const postalCode = document.getElementById('postalCode').value;
            const companyName = document.getElementById('companyName').value;
            const jobTitle = document.getElementById('jobTitle').value;
            const salary = document.getElementById('monthlySalary').value;

            if (!streetAddress || !city || !postalCode || !companyName || !jobTitle || !salary) {
                showNotification('‚ùå Please fill in all required fields', 'error');
                return;
            }

            document.getElementById('registerStep1').classList.add('hidden');
            document.getElementById('registerStep2').classList.add('hidden');
            document.getElementById('registerStep3').classList.remove('hidden');
        }

        function handleLogin() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            if (!email || !password) {
                showNotification('‚ùå Please enter both email and password', 'error');
                return;
            }

            // Simulate login process
            showNotification('üîÑ Signing you in...', 'info');
            
            setTimeout(() => {
                // Check if user exists (simulate)
                const existingUser = localStorage.getItem('veriapp_user');
                if (existingUser) {
                    userData = JSON.parse(existingUser);
                    updateVaultDisplay();
                }
                
                showNotification('‚úÖ Welcome back! Login successful.', 'success');
                showView('home');
            }, 1500);
        }

        function handleRegister() {
            // Validate step 3
            const vehicleMake = document.getElementById('vehicleMake').value;
            const vehicleModel = document.getElementById('vehicleModel').value;
            const vehicleYear = document.getElementById('vehicleYear').value;
            const licensePlate = document.getElementById('licensePlate').value;
            const licenseNumber = document.getElementById('licenseNumber').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const agreeTerms = document.getElementById('agreeTerms').checked;

            if (!vehicleMake || !vehicleModel || !vehicleYear || !licensePlate || !licenseNumber || !password || !confirmPassword) {
                showNotification('‚ùå Please fill in all required fields', 'error');
                return;
            }

            if (password !== confirmPassword) {
                showNotification('‚ùå Passwords do not match', 'error');
                return;
            }

            if (password.length < 6) {
                showNotification('‚ùå Password must be at least 6 characters', 'error');
                return;
            }

            if (!agreeTerms) {
                showNotification('‚ùå Please agree to the Terms of Service', 'error');
                return;
            }

            // Collect all user data
            userData = {
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                idNumber: document.getElementById('idNumber').value,
                email: document.getElementById('registerEmail').value,
                phone: document.getElementById('phoneNumber').value,
                streetAddress: document.getElementById('streetAddress').value,
                city: document.getElementById('city').value,
                postalCode: document.getElementById('postalCode').value,
                companyName: document.getElementById('companyName').value,
                jobTitle: document.getElementById('jobTitle').value,
                monthlySalary: document.getElementById('monthlySalary').value,
                vehicleMake: vehicleMake,
                vehicleModel: vehicleModel,
                vehicleYear: vehicleYear,
                licensePlate: licensePlate,
                licenseNumber: licenseNumber,
                registrationDate: new Date().toISOString()
            };

            // Save to localStorage (simulate database)
            localStorage.setItem('veriapp_user', JSON.stringify(userData));

            // Show success and redirect
            showNotification('üîÑ Creating your secure account...', 'info');
            
            setTimeout(() => {
                showNotification('‚úÖ Account created successfully! Welcome to VeriApp Vault.', 'success');
                updateVaultDisplay();
                showView('home');
            }, 2000);
        }

        function updateVaultDisplay() {
            if (!userData || Object.keys(userData).length === 0) return;

            // Update personal information
            document.getElementById('displayFullName').textContent = `${userData.firstName} ${userData.lastName}`;
            document.getElementById('displayIdNumber').textContent = userData.idNumber;
            document.getElementById('displayEmail').textContent = userData.email;
            document.getElementById('displayPhone').textContent = userData.phone;
            document.getElementById('displayAddress').textContent = `${userData.streetAddress}, ${userData.city}, ${userData.postalCode}`;

            // Update employment information
            document.getElementById('displayCompany').textContent = userData.companyName;
            document.getElementById('displayJobTitle').textContent = userData.jobTitle;
            document.getElementById('displaySalary').textContent = `R${parseInt(userData.monthlySalary).toLocaleString()}`;

            // Update vehicle information
            document.getElementById('displayVehicle').textContent = `${userData.vehicleYear} ${userData.vehicleMake} ${userData.vehicleModel}`;
            document.getElementById('displayLicensePlate').textContent = userData.licensePlate;
            document.getElementById('displayLicenseNumber').textContent = userData.licenseNumber;
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is already logged in
            const existingUser = localStorage.getItem('veriapp_user');
            if (existingUser) {
                userData = JSON.parse(existingUser);
                updateVaultDisplay();
                showView('home');
                setTimeout(() => {
                    showNotification('üîê Welcome back to VeriApp Vault!', 'success');
                }, 1000);
            } else {
                // Show auth view for new users
                showView('auth');
                setTimeout(() => {
                    showNotification('üëã Welcome! Please sign in or create an account.', 'info');
                }, 1000);
            }
            
            // Initialize current view
            updateTabStates(currentView);
        });

        // Handle back button functionality
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                if (!document.getElementById('modalOverlay').classList.contains('hidden')) {
                    closeModal();
                } else if (navigationHistory.length > 0) {
                    const previousView = navigationHistory.pop();
                    showView(previousView);
                }
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97671b54260373d6',t:'MTc1NjQxODY5MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
